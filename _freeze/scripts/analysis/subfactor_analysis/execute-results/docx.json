{
  "hash": "02ede262fa0d6169c4f5568b5d677f9e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Pilot Retention Subfactor Analysis\"\nsubtitle: \"Phase 1A: Within-Construct Sub-Item Rankings and Demographic Comparisons\"\nauthor: \"Analysis Team\"\ndate: today\nformat:\n  docx:\n    toc: true\n    number-sections: true\n  html:\n    toc: true\n    toc-depth: 3\n    code-fold: true\n    embed-resources: true\n    theme: cosmo\n    number-sections: true\nexecute:\n  warning: false\n  message: false\n  echo: true\n---\n\n# Overview\n\nThis analysis examines the 31 sub-item rankings within each retention construct and compares them across demographics.\n\n# Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rstatix)\nlibrary(knitr)\nlibrary(janitor)\nlibrary(DescTools)\n\noptions(scipen = 999)\nknitr::opts_chunk$set(fig.width = 10, fig.height = 6)\n\n# Create output directories\ndir.create(\"../../output/tables/subfactor_analysis\", showWarnings = FALSE, recursive = TRUE)\ndir.create(\"../../output/figures/subfactor_analysis\", showWarnings = FALSE, recursive = TRUE)\n\n# Helper function to safely run Mann-Whitney U tests\nsafe_wilcox_test <- function(data, formula, exact = FALSE) {\n  # Check if we have at least 2 groups with data\n  group_var <- all.vars(formula)[2]\n  n_groups <- data %>%\n    filter(!is.na(!!sym(group_var))) %>%\n    pull(!!sym(group_var)) %>%\n    n_distinct()\n\n  if (n_groups < 2) {\n    # Return empty result if not enough groups\n    return(tibble(\n      .y. = character(),\n      group1 = character(),\n      group2 = character(),\n      n1 = integer(),\n      n2 = integer(),\n      statistic = numeric(),\n      p = numeric()\n    ))\n  }\n\n  # Try to run the test\n  tryCatch(\n    wilcox_test(data, formula, exact = exact),\n    error = function(e) {\n      # Return empty result on error\n      tibble(\n        .y. = character(),\n        group1 = character(),\n        group2 = character(),\n        n1 = integer(),\n        n2 = integer(),\n        statistic = numeric(),\n        p = numeric()\n      )\n    }\n  )\n}\n\n# Helper function to safely run Kruskal-Wallis tests\nsafe_kruskal_test <- function(data, formula) {\n  # Check if we have at least 2 groups with data\n  group_var <- all.vars(formula)[2]\n  n_groups <- data %>%\n    filter(!is.na(!!sym(group_var))) %>%\n    pull(!!sym(group_var)) %>%\n    n_distinct()\n\n  if (n_groups < 2) {\n    # Return empty result if not enough groups\n    return(tibble(\n      .y. = character(),\n      n = integer(),\n      statistic = numeric(),\n      df = integer(),\n      p = numeric()\n    ))\n  }\n\n  # Try to run the test\n  tryCatch(\n    kruskal_test(data, formula),\n    error = function(e) {\n      # Return empty result on error\n      tibble(\n        .y. = character(),\n        n = integer(),\n        statistic = numeric(),\n        df = integer(),\n        p = numeric()\n      )\n    }\n  )\n}\n\n# Variable labels from survey instrument\nfinancial_labels <- c(\n  \"financial_1\" = \"Competitive salary\",\n  \"financial_2\" = \"Allowances and soft pay\",\n  \"financial_3\" = \"Benefits package\",\n  \"financial_4\" = \"Disability insurance\",\n  \"financial_5\" = \"Job security\",\n  \"financial_6\" = \"New hire/longevity bonuses\"\n)\n\nqol_labels <- c(\n  \"qo_l_1\" = \"Predictable schedule\",\n  \"qo_l_2\" = \"Vacation time\",\n  \"qo_l_3\" = \"Family-friendly policies\",\n  \"qo_l_4\" = \"Home base possibility\",\n  \"qo_l_5\" = \"Travel benefits\",\n  \"qo_l_6\" = \"Work-life balance\"\n)\n\nprofessional_labels <- c(\n  \"professional_1\" = \"Financially stable airline\",\n  \"professional_2\" = \"Rapid upgrade opportunity\",\n  \"professional_3\" = \"Fly larger aircraft\",\n  \"professional_4\" = \"Merit-based promotion\",\n  \"professional_5\" = \"Seniority-based upgrade\"\n)\n\nrecognition_labels <- c(\n  \"recognition_1\" = \"Professional uniforms\",\n  \"recognition_3\" = \"Vacation for long service\",\n  \"recognition_4\" = \"Professional respect/recognition\",\n  \"recognition_7\" = \"Airline recognition\"\n)\n\nschedule_labels <- c(\n  \"schedule_1\" = \"Fixed schedule\",\n  \"schedule_2\" = \"Variable schedule\",\n  \"schedule_3\" = \"Flexible work rules\",\n  \"schedule_4\" = \"Bid line seniority system\",\n  \"schedule_5\" = \"Vacation bidding rules\"\n)\n\noperational_labels <- c(\n  \"operational_1\" = \"Unambiguous SOPs\",\n  \"operational_2\" = \"Proactive training\",\n  \"operational_3\" = \"Well-maintained aircraft\",\n  \"operational_4\" = \"Well-equipped aircraft\",\n  \"operational_5\" = \"Highly skilled pilots\"\n)\n```\n:::\n\n\n# Data Loading\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load data (same as retention.Rmd)\nraw <- read_csv(\"../../data/processed/retention.csv\", show_col_types = FALSE)\n\nretention_data <- raw %>%\n  slice(-(1:2)) %>%\n  clean_names()\n\n# Filter to valid responses\nincluded_data <- retention_data %>%\n  mutate(\n    finished = toupper(as.character(finished)),\n    informed_consent = toupper(as.character(informed_consent)),\n    screener = toupper(as.character(screener))\n  ) %>%\n  filter(\n    finished == \"TRUE\",\n    informed_consent == \"YES\",\n    screener == \"YES\"\n  )\n\ncat(\"Valid observations:\", nrow(included_data), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nValid observations: 76 \n```\n\n\n:::\n:::\n\n\n# Demographic Groups\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create demographic groups (matching retention.Rmd approach)\nincluded_data <- included_data %>%\n  mutate(\n    # Numeric conversions\n    age = as.numeric(age),\n    experience = as.numeric(experience),\n\n    # Age groups\n    age_group = if_else(age <= 35, \"≤35\", \">35\"),\n\n    # Experience quartiles\n    exp_q = ntile(experience, 4),\n    exp_q = factor(exp_q, labels = c(\"Q1\", \"Q2\", \"Q3\", \"Q4\")),\n\n    # Gender\n    gender_clean = case_when(\n      tolower(gender) %in% c(\"male\", \"m\") ~ \"Male\",\n      tolower(gender) %in% c(\"female\", \"f\") ~ \"Female\",\n      TRUE ~ NA_character_\n    ),\n\n    # Position\n    position = position_position,\n\n    # Military\n    military_clean = case_when(\n      str_detect(tolower(military_experience), \"currently serve|previously served\") ~ \"Military\",\n      str_detect(tolower(military_experience), \"never\") ~ \"Civilian\",\n      TRUE ~ NA_character_\n    )\n  )\n\n# Summary\ncat(\"\\n=== DEMOGRAPHICS ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== DEMOGRAPHICS ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Age groups:\\n\"); table(included_data$age_group) %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAge groups:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n>35 ≤35 \n 18  58 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"\\nGender:\\n\"); table(included_data$gender_clean, useNA = \"ifany\") %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nGender:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nFemale   Male   <NA> \n     8     67      1 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"\\nPosition:\\n\"); table(included_data$position, useNA = \"ifany\") %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPosition:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n      Captain First Officer \n           26            50 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"\\nExperience:\\n\"); table(included_data$exp_q) %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nExperience:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nQ1 Q2 Q3 Q4 \n19 19 19 19 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"\\nMilitary:\\n\"); table(included_data$military_clean, useNA = \"ifany\") %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nMilitary:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCivilian Military \n      69        7 \n```\n\n\n:::\n:::\n\n\n# Financial Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"FINANCIAL SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nFINANCIAL SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\n# Convert to long format\nfinancial_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         financial_1:financial_6) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(financial_1:financial_6, as.numeric)) %>%\n  pivot_longer(\n    cols = financial_1:financial_6,\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive stats\nfinancial_desc <- financial_long %>%\n  group_by(item) %>%\n  summarise(\n    n = n(),\n    median = median(rank),\n    mean = mean(rank),\n    sd = sd(rank),\n    pct_rank1 = sum(rank == 1) / n() * 100\n  ) %>%\n  mutate(item = recode(item, !!!financial_labels))\n\nkable(financial_desc, digits = 2, caption = \"Financial Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial Subfactors - Descriptive Statistics\n\n|item                       |  n| median| mean|   sd| pct_rank1|\n|:--------------------------|--:|------:|----:|----:|---------:|\n|Competitive salary         | 76|    2.0| 1.64| 0.74|     47.37|\n|Allowances and soft pay    | 76|    4.0| 3.96| 1.24|      1.32|\n|Benefits package           | 76|    3.0| 3.36| 1.14|      5.26|\n|Disability insurance       | 76|    4.5| 4.41| 1.05|      1.32|\n|Job security               | 76|    2.0| 2.09| 1.28|     44.74|\n|New hire/longevity bonuses | 76|    6.0| 5.54| 0.92|      0.00|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman test\nfriedman_financial <- financial_long %>%\n  friedman_test(rank ~ item | respondent_id)\n\ncat(\"\\n--- Friedman Test ---\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(friedman_financial)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df        p method       \n* <chr> <int>     <dbl> <dbl>    <dbl> <chr>        \n1 rank     76      231.     5 6.34e-48 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Age group comparisons (Mann-Whitney U)\nmw_age_fin <- financial_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_fin) > 0) {\n  mw_age_fin <- mw_age_fin %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!financial_labels))\n}\n\nkable(mw_age_fin, digits = 3, caption = \"Financial: Age Group Comparisons (Mann-Whitney U)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial: Age Group Comparisons (Mann-Whitney U)\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Competitive salary         |     460.5| 0.406| 1.000|ns           |\n|Allowances and soft pay    |     502.0| 0.806| 1.000|ns           |\n|Benefits package           |     583.0| 0.444| 1.000|ns           |\n|Disability insurance       |     515.0| 0.934| 1.000|ns           |\n|Job security               |     516.5| 0.948| 1.000|ns           |\n|New hire/longevity bonuses |     619.0| 0.127| 0.762|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Gender comparisons\nmw_gender_fin <- financial_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_fin) > 0) {\n  mw_gender_fin <- mw_gender_fin %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!financial_labels))\n}\n\nkable(mw_gender_fin, digits = 3, caption = \"Financial: Gender Comparisons (Mann-Whitney U)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial: Gender Comparisons (Mann-Whitney U)\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Competitive salary         |     363.0| 0.069| 0.415|ns           |\n|Allowances and soft pay    |     332.5| 0.258| 1.000|ns           |\n|Benefits package           |     204.0| 0.259| 1.000|ns           |\n|Disability insurance       |     174.0| 0.093| 0.557|ns           |\n|Job security               |     205.0| 0.255| 1.000|ns           |\n|New hire/longevity bonuses |     311.0| 0.339| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Position comparisons\nmw_position_fin <- financial_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_fin) > 0) {\n  mw_position_fin <- mw_position_fin %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!financial_labels))\n}\n\nkable(mw_position_fin, digits = 3, caption = \"Financial: Position Comparisons (Mann-Whitney U)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial: Position Comparisons (Mann-Whitney U)\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Competitive salary         |     603.5| 0.574| 1.000|ns           |\n|Allowances and soft pay    |     596.0| 0.547| 1.000|ns           |\n|Benefits package           |     646.5| 0.973| 1.000|ns           |\n|Disability insurance       |     730.0| 0.362| 1.000|ns           |\n|Job security               |     674.5| 0.781| 1.000|ns           |\n|New hire/longevity bonuses |     755.5| 0.137| 0.822|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Military comparisons\nmw_military_fin <- financial_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_fin) > 0) {\n  mw_military_fin <- mw_military_fin %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!financial_labels))\n}\n\nkable(mw_military_fin, digits = 3, caption = \"Financial: Military Comparisons (Mann-Whitney U)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial: Military Comparisons (Mann-Whitney U)\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Competitive salary         |     311.5| 0.164| 0.984|ns           |\n|Allowances and soft pay    |     233.5| 0.890| 1.000|ns           |\n|Benefits package           |     264.5| 0.676| 1.000|ns           |\n|Disability insurance       |     229.0| 0.821| 1.000|ns           |\n|Job security               |     169.5| 0.173| 1.000|ns           |\n|New hire/longevity bonuses |     246.0| 0.926| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Experience quartile comparisons (Kruskal-Wallis)\nkw_exp_fin <- financial_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_fin) > 0) {\n  kw_exp_fin <- kw_exp_fin %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!financial_labels))\n}\n\nkable(kw_exp_fin, digits = 3, caption = \"Financial: Experience Comparisons (Kruskal-Wallis)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Financial: Experience Comparisons (Kruskal-Wallis)\n\n|item                       | statistic| df|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|--:|-----:|-----:|:------------|\n|Competitive salary         |     1.885|  3| 0.597|     1|ns           |\n|Allowances and soft pay    |     3.862|  3| 0.277|     1|ns           |\n|Benefits package           |     3.708|  3| 0.295|     1|ns           |\n|Disability insurance       |     4.724|  3| 0.193|     1|ns           |\n|Job security               |     2.263|  3| 0.520|     1|ns           |\n|New hire/longevity bonuses |     4.884|  3| 0.181|     1|ns           |\n\n\n:::\n:::\n\n\n# Quality of Life Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"QUALITY OF LIFE SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nQUALITY OF LIFE SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\n# Convert to long format\nqol_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         qo_l_1:qo_l_6) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(qo_l_1:qo_l_6, as.numeric)) %>%\n  pivot_longer(\n    cols = qo_l_1:qo_l_6,\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive stats\nqol_desc <- qol_long %>%\n  group_by(item) %>%\n  summarise(\n    n = n(),\n    median = median(rank),\n    mean = mean(rank),\n    sd = sd(rank),\n    pct_rank1 = sum(rank == 1) / n() * 100\n  ) %>%\n  mutate(item = recode(item, !!!qol_labels))\n\nkable(qol_desc, digits = 2, caption = \"QoL Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL Subfactors - Descriptive Statistics\n\n|item                     |  n| median| mean|   sd| pct_rank1|\n|:------------------------|--:|------:|----:|----:|---------:|\n|Predictable schedule     | 76|      2| 2.51| 1.13|     19.74|\n|Vacation time            | 76|      4| 4.12| 1.18|      1.32|\n|Family-friendly policies | 76|      5| 4.53| 1.28|      1.32|\n|Home base possibility    | 76|      2| 2.70| 1.87|     39.47|\n|Travel benefits          | 76|      5| 4.87| 1.20|      1.32|\n|Work-life balance        | 76|      2| 2.28| 1.41|     36.84|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman test\nfriedman_qol <- qol_long %>%\n  friedman_test(rank ~ item | respondent_id)\n\ncat(\"\\n--- Friedman Test ---\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(friedman_qol)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df        p method       \n* <chr> <int>     <dbl> <dbl>    <dbl> <chr>        \n1 rank     76      139.     5 2.30e-28 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Age group\nmw_age_qol <- qol_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_qol) > 0) {\n  mw_age_qol <- mw_age_qol %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!qol_labels))\n}\n\nkable(mw_age_qol, digits = 3, caption = \"QoL: Age Group Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL: Age Group Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Predictable schedule     |     329.5| 0.015| 0.088|ns           |\n|Vacation time            |     544.5| 0.780| 1.000|ns           |\n|Family-friendly policies |     481.0| 0.610| 1.000|ns           |\n|Home base possibility    |     529.5| 0.929| 1.000|ns           |\n|Travel benefits          |     570.0| 0.543| 1.000|ns           |\n|Work-life balance        |     640.0| 0.134| 0.804|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Gender\nmw_gender_qol <- qol_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_qol) > 0) {\n  mw_gender_qol <- mw_gender_qol %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!qol_labels))\n}\n\nkable(mw_gender_qol, digits = 3, caption = \"QoL: Gender Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL: Gender Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Predictable schedule     |     197.5| 0.212| 1.000|ns           |\n|Vacation time            |     253.5| 0.803| 1.000|ns           |\n|Family-friendly policies |     265.5| 0.972| 1.000|ns           |\n|Home base possibility    |     259.0| 0.880| 1.000|ns           |\n|Travel benefits          |     359.5| 0.102| 0.612|ns           |\n|Work-life balance        |     290.5| 0.693| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Position\nmw_position_qol <- qol_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_qol) > 0) {\n  mw_position_qol <- mw_position_qol %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!qol_labels))\n}\n\nkable(mw_position_qol, digits = 3, caption = \"QoL: Position Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL: Position Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Predictable schedule     |     722.0| 0.415|     1|ns           |\n|Vacation time            |     604.0| 0.605|     1|ns           |\n|Family-friendly policies |     739.5| 0.315|     1|ns           |\n|Home base possibility    |     556.0| 0.287|     1|ns           |\n|Travel benefits          |     576.5| 0.402|     1|ns           |\n|Work-life balance        |     711.5| 0.485|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Military\nmw_military_qol <- qol_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_qol) > 0) {\n  mw_military_qol <- mw_military_qol %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!qol_labels))\n}\n\nkable(mw_military_qol, digits = 3, caption = \"QoL: Military Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL: Military Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Predictable schedule     |     193.5| 0.375| 1.000|ns           |\n|Vacation time            |     216.0| 0.641| 1.000|ns           |\n|Family-friendly policies |     200.5| 0.453| 1.000|ns           |\n|Home base possibility    |     357.5| 0.031| 0.186|ns           |\n|Travel benefits          |     236.5| 0.932| 1.000|ns           |\n|Work-life balance        |     198.0| 0.420| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\n# Experience\nkw_exp_qol <- qol_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_qol) > 0) {\n  kw_exp_qol <- kw_exp_qol %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!qol_labels))\n}\n\nkable(kw_exp_qol, digits = 3, caption = \"QoL: Experience Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: QoL: Experience Comparisons\n\n|item                     | statistic| df|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|--:|-----:|-----:|:------------|\n|Predictable schedule     |     7.452|  3| 0.059| 0.353|ns           |\n|Vacation time            |     5.189|  3| 0.158| 0.948|ns           |\n|Family-friendly policies |     4.905|  3| 0.179| 1.000|ns           |\n|Home base possibility    |     2.634|  3| 0.451| 1.000|ns           |\n|Travel benefits          |     1.214|  3| 0.750| 1.000|ns           |\n|Work-life balance        |     1.712|  3| 0.634| 1.000|ns           |\n\n\n:::\n:::\n\n\n# Professional Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"PROFESSIONAL SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPROFESSIONAL SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\nprofessional_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         professional_1:professional_5) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(professional_1:professional_5, as.numeric)) %>%\n  pivot_longer(\n    cols = professional_1:professional_5,\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive\nprofessional_desc <- professional_long %>%\n  group_by(item) %>%\n  summarise(n = n(), median = median(rank), mean = mean(rank),\n            sd = sd(rank), pct_rank1 = sum(rank == 1) / n() * 100) %>%\n  mutate(item = recode(item, !!!professional_labels))\nkable(professional_desc, digits = 2, caption = \"Professional Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional Subfactors - Descriptive Statistics\n\n|item                       |  n| median| mean|   sd| pct_rank1|\n|:--------------------------|--:|------:|----:|----:|---------:|\n|Financially stable airline | 76|      1| 1.18| 0.42|     82.89|\n|Rapid upgrade opportunity  | 76|      3| 3.45| 1.09|      1.32|\n|Fly larger aircraft        | 76|      3| 3.26| 1.43|     10.53|\n|Merit-based promotion      | 76|      3| 3.45| 1.24|      5.26|\n|Seniority-based upgrade    | 76|      4| 3.66| 0.97|      0.00|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman\nfriedman_prof <- professional_long %>%\n  friedman_test(rank ~ item | respondent_id)\ncat(\"\\n--- Friedman Test ---\\n\"); print(friedman_prof)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df        p method       \n* <chr> <int>     <dbl> <dbl>    <dbl> <chr>        \n1 rank     76      128.     4 1.23e-26 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Demographics\nmw_age_prof <- professional_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_prof) > 0) {\n  mw_age_prof <- mw_age_prof %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!professional_labels))\n}\n\nkable(mw_age_prof, digits = 3, caption = \"Professional: Age Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional: Age Comparisons\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Financially stable airline |     442.5| 0.139| 0.695|ns           |\n|Rapid upgrade opportunity  |     560.0| 0.636| 1.000|ns           |\n|Fly larger aircraft        |     558.5| 0.650| 1.000|ns           |\n|Merit-based promotion      |     495.0| 0.739| 1.000|ns           |\n|Seniority-based upgrade    |     498.5| 0.769| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_gender_prof <- professional_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_prof) > 0) {\n  mw_gender_prof <- mw_gender_prof %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!professional_labels))\n}\n\nkable(mw_gender_prof, digits = 3, caption = \"Professional: Gender Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional: Gender Comparisons\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Financially stable airline |     253.0| 0.705| 1.000|ns           |\n|Rapid upgrade opportunity  |     316.5| 0.394| 1.000|ns           |\n|Fly larger aircraft        |     355.5| 0.123| 0.615|ns           |\n|Merit-based promotion      |     173.5| 0.097| 0.484|ns           |\n|Seniority-based upgrade    |     216.5| 0.360| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_position_prof <- professional_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_prof) > 0) {\n  mw_position_prof <- mw_position_prof %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!professional_labels))\n}\n\nkable(mw_position_prof, digits = 3, caption = \"Professional: Position Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional: Position Comparisons\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Financially stable airline |     593.5| 0.348|     1|ns           |\n|Rapid upgrade opportunity  |     696.5| 0.603|     1|ns           |\n|Fly larger aircraft        |     679.5| 0.743|     1|ns           |\n|Merit-based promotion      |     645.0| 0.960|     1|ns           |\n|Seniority-based upgrade    |     578.0| 0.414|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_military_prof <- professional_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_prof) > 0) {\n  mw_military_prof <- mw_military_prof %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!professional_labels))\n}\n\nkable(mw_military_prof, digits = 3, caption = \"Professional: Military Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional: Military Comparisons\n\n|item                       | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|-----:|-----:|:------------|\n|Financially stable airline |     287.0| 0.216| 1.000|ns           |\n|Rapid upgrade opportunity  |     323.5| 0.130| 0.650|ns           |\n|Fly larger aircraft        |     135.0| 0.049| 0.246|ns           |\n|Merit-based promotion      |     229.0| 0.824| 1.000|ns           |\n|Seniority-based upgrade    |     303.0| 0.253| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nkw_exp_prof <- professional_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_prof) > 0) {\n  kw_exp_prof <- kw_exp_prof %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!professional_labels))\n}\n\nkable(kw_exp_prof, digits = 3, caption = \"Professional: Experience Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Professional: Experience Comparisons\n\n|item                       | statistic| df|     p| p.adj|p.adj.signif |\n|:--------------------------|---------:|--:|-----:|-----:|:------------|\n|Financially stable airline |     1.667|  3| 0.644| 1.000|ns           |\n|Rapid upgrade opportunity  |     2.979|  3| 0.395| 1.000|ns           |\n|Fly larger aircraft        |     0.302|  3| 0.960| 1.000|ns           |\n|Merit-based promotion      |     2.428|  3| 0.488| 1.000|ns           |\n|Seniority-based upgrade    |     6.135|  3| 0.105| 0.525|ns           |\n\n\n:::\n:::\n\n\n# Recognition Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"RECOGNITION SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRECOGNITION SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\nrecognition_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         recognition_1, recognition_3, recognition_4, recognition_7) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(starts_with(\"recognition\"), as.numeric)) %>%\n  pivot_longer(\n    cols = starts_with(\"recognition\"),\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive\nrecognition_desc <- recognition_long %>%\n  group_by(item) %>%\n  summarise(n = n(), median = median(rank), mean = mean(rank),\n            sd = sd(rank), pct_rank1 = sum(rank == 1) / n() * 100) %>%\n  mutate(item = recode(item, !!!recognition_labels))\nkable(recognition_desc, digits = 2, caption = \"Recognition Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition Subfactors - Descriptive Statistics\n\n|item                             |  n| median| mean|   sd| pct_rank1|\n|:--------------------------------|--:|------:|----:|----:|---------:|\n|Professional uniforms            | 76|      3| 2.80| 0.97|     14.47|\n|Vacation for long service        | 76|      2| 2.04| 1.01|     36.84|\n|Professional respect/recognition | 76|      2| 1.78| 0.84|     44.74|\n|Airline recognition              | 76|      4| 3.38| 0.88|      3.95|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman\nfriedman_recog <- recognition_long %>%\n  friedman_test(rank ~ item | respondent_id)\ncat(\"\\n--- Friedman Test ---\\n\"); print(friedman_recog)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df        p method       \n* <chr> <int>     <dbl> <dbl>    <dbl> <chr>        \n1 rank     76      73.2     3 8.95e-16 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Demographics\nmw_age_recog <- recognition_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_recog) > 0) {\n  mw_age_recog <- mw_age_recog %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!recognition_labels))\n}\n\nkable(mw_age_recog, digits = 3, caption = \"Recognition: Age Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition: Age Comparisons\n\n|item                             | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------------|---------:|-----:|-----:|:------------|\n|Professional uniforms            |       577| 0.476| 1.000|ns           |\n|Vacation for long service        |       345| 0.023| 0.093|ns           |\n|Professional respect/recognition |       601| 0.300| 1.000|ns           |\n|Airline recognition              |       579| 0.430| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_gender_recog <- recognition_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_recog) > 0) {\n  mw_gender_recog <- mw_gender_recog %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!recognition_labels))\n}\n\nkable(mw_gender_recog, digits = 3, caption = \"Recognition: Gender Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition: Gender Comparisons\n\n|item                             | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------------|---------:|-----:|-----:|:------------|\n|Professional uniforms            |     183.0| 0.120| 0.480|ns           |\n|Vacation for long service        |     247.5| 0.718| 1.000|ns           |\n|Professional respect/recognition |     264.0| 0.948| 1.000|ns           |\n|Airline recognition              |     384.0| 0.023| 0.091|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_position_recog <- recognition_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_recog) > 0) {\n  mw_position_recog <- mw_position_recog %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!recognition_labels))\n}\n\nkable(mw_position_recog, digits = 3, caption = \"Recognition: Position Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition: Position Comparisons\n\n|item                             | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------------|---------:|-----:|-----:|:------------|\n|Professional uniforms            |     767.5| 0.171| 0.684|ns           |\n|Vacation for long service        |     496.5| 0.078| 0.312|ns           |\n|Professional respect/recognition |     724.0| 0.385| 1.000|ns           |\n|Airline recognition              |     618.0| 0.694| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_military_recog <- recognition_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_recog) > 0) {\n  mw_military_recog <- mw_military_recog %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!recognition_labels))\n}\n\nkable(mw_military_recog, digits = 3, caption = \"Recognition: Military Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition: Military Comparisons\n\n|item                             | statistic|     p| p.adj|p.adj.signif |\n|:--------------------------------|---------:|-----:|-----:|:------------|\n|Professional uniforms            |     119.5| 0.020| 0.078|ns           |\n|Vacation for long service        |     355.5| 0.032| 0.128|ns           |\n|Professional respect/recognition |     214.0| 0.600| 1.000|ns           |\n|Airline recognition              |     274.0| 0.511| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nkw_exp_recog <- recognition_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_recog) > 0) {\n  kw_exp_recog <- kw_exp_recog %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!recognition_labels))\n}\n\nkable(kw_exp_recog, digits = 3, caption = \"Recognition: Experience Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Recognition: Experience Comparisons\n\n|item                             | statistic| df|     p| p.adj|p.adj.signif |\n|:--------------------------------|---------:|--:|-----:|-----:|:------------|\n|Professional uniforms            |     4.887|  3| 0.180| 0.720|ns           |\n|Vacation for long service        |     8.274|  3| 0.041| 0.163|ns           |\n|Professional respect/recognition |     1.184|  3| 0.757| 1.000|ns           |\n|Airline recognition              |     0.637|  3| 0.888| 1.000|ns           |\n\n\n:::\n:::\n\n\n# Schedule Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"SCHEDULE SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSCHEDULE SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\nschedule_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         schedule_1:schedule_5) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(schedule_1:schedule_5, as.numeric)) %>%\n  pivot_longer(\n    cols = schedule_1:schedule_5,\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive\nschedule_desc <- schedule_long %>%\n  group_by(item) %>%\n  summarise(n = n(), median = median(rank), mean = mean(rank),\n            sd = sd(rank), pct_rank1 = sum(rank == 1) / n() * 100) %>%\n  mutate(item = recode(item, !!!schedule_labels))\nkable(schedule_desc, digits = 2, caption = \"Schedule Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule Subfactors - Descriptive Statistics\n\n|item                      |  n| median| mean|   sd| pct_rank1|\n|:-------------------------|--:|------:|----:|----:|---------:|\n|Fixed schedule            | 76|    3.5| 3.18| 1.64|     25.00|\n|Variable schedule         | 76|    3.0| 3.39| 1.39|     14.47|\n|Flexible work rules       | 76|    2.0| 2.12| 1.31|     42.11|\n|Bid line seniority system | 76|    3.0| 2.82| 1.27|     18.42|\n|Vacation bidding rules    | 76|    3.0| 3.49| 0.97|      0.00|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman\nfriedman_sched <- schedule_long %>%\n  friedman_test(rank ~ item | respondent_id)\ncat(\"\\n--- Friedman Test ---\\n\"); print(friedman_sched)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df           p method       \n* <chr> <int>     <dbl> <dbl>       <dbl> <chr>        \n1 rank     76      37.6     4 0.000000133 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Demographics\nmw_age_sched <- schedule_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_sched) > 0) {\n  mw_age_sched <- mw_age_sched %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!schedule_labels))\n}\n\nkable(mw_age_sched, digits = 3, caption = \"Schedule: Age Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule: Age Comparisons\n\n|item                      | statistic|     p| p.adj|p.adj.signif |\n|:-------------------------|---------:|-----:|-----:|:------------|\n|Fixed schedule            |     464.5| 0.472|  1.00|ns           |\n|Variable schedule         |     493.5| 0.724|  1.00|ns           |\n|Flexible work rules       |     669.0| 0.058|  0.29|ns           |\n|Bid line seniority system |     574.5| 0.514|  1.00|ns           |\n|Vacation bidding rules    |     479.0| 0.588|  1.00|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_gender_sched <- schedule_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_sched) > 0) {\n  mw_gender_sched <- mw_gender_sched %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!schedule_labels))\n}\n\nkable(mw_gender_sched, digits = 3, caption = \"Schedule: Gender Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule: Gender Comparisons\n\n|item                      | statistic|     p| p.adj|p.adj.signif |\n|:-------------------------|---------:|-----:|-----:|:------------|\n|Fixed schedule            |     202.5| 0.248|  1.00|ns           |\n|Variable schedule         |     387.0| 0.036|  0.18|ns           |\n|Flexible work rules       |     229.5| 0.489|  1.00|ns           |\n|Bid line seniority system |     270.5| 0.972|  1.00|ns           |\n|Vacation bidding rules    |     204.0| 0.256|  1.00|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_position_sched <- schedule_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_sched) > 0) {\n  mw_position_sched <- mw_position_sched %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!schedule_labels))\n}\n\nkable(mw_position_sched, digits = 3, caption = \"Schedule: Position Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule: Position Comparisons\n\n|item                      | statistic|     p| p.adj|p.adj.signif |\n|:-------------------------|---------:|-----:|-----:|:------------|\n|Fixed schedule            |     606.0| 0.622|     1|ns           |\n|Variable schedule         |     647.0| 0.977|     1|ns           |\n|Flexible work rules       |     714.0| 0.462|     1|ns           |\n|Bid line seniority system |     747.5| 0.276|     1|ns           |\n|Vacation bidding rules    |     551.5| 0.263|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_military_sched <- schedule_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_sched) > 0) {\n  mw_military_sched <- mw_military_sched %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!schedule_labels))\n}\n\nkable(mw_military_sched, digits = 3, caption = \"Schedule: Military Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule: Military Comparisons\n\n|item                      | statistic|     p| p.adj|p.adj.signif |\n|:-------------------------|---------:|-----:|-----:|:------------|\n|Fixed schedule            |     177.0| 0.235|     1|ns           |\n|Variable schedule         |     286.5| 0.410|     1|ns           |\n|Flexible work rules       |     227.5| 0.797|     1|ns           |\n|Bid line seniority system |     216.0| 0.645|     1|ns           |\n|Vacation bidding rules    |     257.0| 0.779|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nkw_exp_sched <- schedule_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_sched) > 0) {\n  kw_exp_sched <- kw_exp_sched %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!schedule_labels))\n}\n\nkable(kw_exp_sched, digits = 3, caption = \"Schedule: Experience Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Schedule: Experience Comparisons\n\n|item                      | statistic| df|     p| p.adj|p.adj.signif |\n|:-------------------------|---------:|--:|-----:|-----:|:------------|\n|Fixed schedule            |     1.454|  3| 0.693|   1.0|ns           |\n|Variable schedule         |     0.483|  3| 0.923|   1.0|ns           |\n|Flexible work rules       |     4.079|  3| 0.253|   1.0|ns           |\n|Bid line seniority system |     4.188|  3| 0.242|   1.0|ns           |\n|Vacation bidding rules    |     5.826|  3| 0.120|   0.6|ns           |\n\n\n:::\n:::\n\n\n# Operational Subfactors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"\\n========================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"OPERATIONAL SUBFACTORS\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOPERATIONAL SUBFACTORS\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"========================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n========================================\n```\n\n\n:::\n\n```{.r .cell-code}\noperational_long <- included_data %>%\n  select(age_group, gender_clean, position, exp_q, military_clean,\n         operational_1:operational_5) %>%\n  mutate(respondent_id = row_number()) %>%  # Create persistent ID before pivoting\n  mutate(across(operational_1:operational_5, as.numeric)) %>%\n  pivot_longer(\n    cols = operational_1:operational_5,\n    names_to = \"item\",\n    values_to = \"rank\"\n  ) %>%\n  filter(!is.na(rank))\n\n# Descriptive\noperational_desc <- operational_long %>%\n  group_by(item) %>%\n  summarise(n = n(), median = median(rank), mean = mean(rank),\n            sd = sd(rank), pct_rank1 = sum(rank == 1) / n() * 100) %>%\n  mutate(item = recode(item, !!!operational_labels))\nkable(operational_desc, digits = 2, caption = \"Operational Subfactors - Descriptive Statistics\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational Subfactors - Descriptive Statistics\n\n|item                     |  n| median| mean|   sd| pct_rank1|\n|:------------------------|--:|------:|----:|----:|---------:|\n|Unambiguous SOPs         | 76|      3| 3.07| 1.59|     28.95|\n|Proactive training       | 76|      3| 2.84| 1.17|     11.84|\n|Well-maintained aircraft | 76|      2| 2.25| 1.16|     35.53|\n|Well-equipped aircraft   | 76|      5| 4.13| 1.18|      1.32|\n|Highly skilled pilots    | 76|      3| 2.71| 1.24|     22.37|\n\n\n:::\n\n```{.r .cell-code}\n# Friedman\nfriedman_oper <- operational_long %>%\n  friedman_test(rank ~ item | respondent_id)\ncat(\"\\n--- Friedman Test ---\\n\"); print(friedman_oper)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Friedman Test ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 6\n  .y.       n statistic    df        p method       \n* <chr> <int>     <dbl> <dbl>    <dbl> <chr>        \n1 rank     76      59.5     4 3.76e-12 Friedman test\n```\n\n\n:::\n\n```{.r .cell-code}\n# Demographics\nmw_age_oper <- operational_long %>%\n  filter(!is.na(age_group)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ age_group, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_age_oper) > 0) {\n  mw_age_oper <- mw_age_oper %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!operational_labels))\n}\n\nkable(mw_age_oper, digits = 3, caption = \"Operational: Age Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational: Age Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Unambiguous SOPs         |     486.0| 0.655| 1.000|ns           |\n|Proactive training       |     406.0| 0.145| 0.725|ns           |\n|Well-maintained aircraft |     556.0| 0.671| 1.000|ns           |\n|Well-equipped aircraft   |     551.5| 0.692| 1.000|ns           |\n|Highly skilled pilots    |     608.0| 0.283| 1.000|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_gender_oper <- operational_long %>%\n  filter(!is.na(gender_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ gender_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_gender_oper) > 0) {\n  mw_gender_oper <- mw_gender_oper %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!operational_labels))\n}\n\nkable(mw_gender_oper, digits = 3, caption = \"Operational: Gender Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational: Gender Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Unambiguous SOPs         |     255.0| 0.825|     1|ns           |\n|Proactive training       |     240.0| 0.626|     1|ns           |\n|Well-maintained aircraft |     237.0| 0.586|     1|ns           |\n|Well-equipped aircraft   |     328.5| 0.247|     1|ns           |\n|Highly skilled pilots    |     290.0| 0.705|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_position_oper <- operational_long %>%\n  filter(!is.na(position)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ position, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_position_oper) > 0) {\n  mw_position_oper <- mw_position_oper %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!operational_labels))\n}\n\nkable(mw_position_oper, digits = 3, caption = \"Operational: Position Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational: Position Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Unambiguous SOPs         |     620.0| 0.740|     1|ns           |\n|Proactive training       |     722.5| 0.416|     1|ns           |\n|Well-maintained aircraft |     618.0| 0.720|     1|ns           |\n|Well-equipped aircraft   |     637.5| 0.883|     1|ns           |\n|Highly skilled pilots    |     655.5| 0.955|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nmw_military_oper <- operational_long %>%\n  filter(!is.na(military_clean)) %>%\n  group_by(item) %>%\n  safe_wilcox_test(rank ~ military_clean, exact = FALSE) %>%\n  ungroup()\n\nif (nrow(mw_military_oper) > 0) {\n  mw_military_oper <- mw_military_oper %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!operational_labels))\n}\n\nkable(mw_military_oper, digits = 3, caption = \"Operational: Military Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational: Military Comparisons\n\n|item                     | statistic|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|-----:|-----:|:------------|\n|Unambiguous SOPs         |     287.0| 0.405|     1|ns           |\n|Proactive training       |     280.0| 0.481|     1|ns           |\n|Well-maintained aircraft |     218.0| 0.668|     1|ns           |\n|Well-equipped aircraft   |     204.5| 0.463|     1|ns           |\n|Highly skilled pilots    |     225.0| 0.768|     1|ns           |\n\n\n:::\n\n```{.r .cell-code}\nkw_exp_oper <- operational_long %>%\n  filter(!is.na(exp_q)) %>%\n  group_by(item) %>%\n  safe_kruskal_test(rank ~ exp_q) %>%\n  ungroup()\n\nif (nrow(kw_exp_oper) > 0) {\n  kw_exp_oper <- kw_exp_oper %>%\n    adjust_pvalue(method = \"bonferroni\") %>%\n    add_significance(\"p.adj\") %>%\n    select(item, statistic, df, p, p.adj, p.adj.signif) %>%\n    mutate(item = recode(item, !!!operational_labels))\n}\n\nkable(kw_exp_oper, digits = 3, caption = \"Operational: Experience Comparisons\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Operational: Experience Comparisons\n\n|item                     | statistic| df|     p| p.adj|p.adj.signif |\n|:------------------------|---------:|--:|-----:|-----:|:------------|\n|Unambiguous SOPs         |     4.274|  3| 0.233|   1.0|ns           |\n|Proactive training       |     0.476|  3| 0.924|   1.0|ns           |\n|Well-maintained aircraft |     1.985|  3| 0.575|   1.0|ns           |\n|Well-equipped aircraft   |     0.326|  3| 0.955|   1.0|ns           |\n|Highly skilled pilots    |     5.161|  3| 0.160|   0.8|ns           |\n\n\n:::\n:::\n\n\n# Conclusion\n\nThis analysis examined 31 subfactor rankings across six retention constructs (Financial, Quality of Life, Professional Opportunity, Recognition, Schedule, and Operational) and compared them across five demographic groups: age (≤35 vs >35), gender, position (Captain vs First Officer), military experience, and years of experience (quartiles).\n\n**Statistical Methods:** Mann-Whitney U tests were used for binary demographic comparisons, Kruskal-Wallis tests for experience quartiles, and Friedman tests for within-construct comparisons. All tests used proper respondent identifiers to maintain the repeated-measures structure of the data.\n\n**Key Finding:** After conducting 155 demographic comparison tests with Bonferroni correction for multiple comparisons, **no significant demographic differences were detected** (p.adj < 0.05) in how pilots ranked subfactor priorities within any retention construct.\n\nRegardless of age, gender, position, military background, or years of experience, pilots demonstrate similar preferences for specific retention factors within each construct.\n\n# Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.5.2 (2025-10-31)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Tahoe 26.1\n\nMatrix products: default\nBLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] DescTools_0.99.60 janitor_2.2.1     knitr_1.50        rstatix_0.7.3    \n [5] lubridate_1.9.4   forcats_1.0.1     stringr_1.6.0     dplyr_1.1.4      \n [9] purrr_1.2.0       readr_2.1.5       tidyr_1.3.1       tibble_3.3.0     \n[13] ggplot2_4.0.0     tidyverse_2.0.0  \n\nloaded via a namespace (and not attached):\n [1] gld_2.6.8          gtable_0.3.6       xfun_0.54          lattice_0.22-7    \n [5] tzdb_0.5.0         vctrs_0.6.5        tools_4.5.2        generics_0.1.4    \n [9] parallel_4.5.2     proxy_0.4-27       pkgconfig_2.0.3    Matrix_1.7-4      \n[13] data.table_1.17.8  RColorBrewer_1.1-3 S7_0.2.0           readxl_1.4.5      \n[17] rootSolve_1.8.2.4  lifecycle_1.0.4    compiler_4.5.2     farver_2.1.2      \n[21] Exact_3.3          carData_3.0-5      snakecase_0.11.1   htmltools_0.5.8.1 \n[25] class_7.3-23       yaml_2.3.10        Formula_1.2-5      crayon_1.5.3      \n[29] pillar_1.11.1      car_3.1-3          MASS_7.3-65        boot_1.3-32       \n[33] abind_1.4-8        tidyselect_1.2.1   digest_0.6.37      mvtnorm_1.3-3     \n[37] stringi_1.8.7      fastmap_1.2.0      grid_4.5.2         lmom_3.2          \n[41] expm_1.0-0         cli_3.6.5          magrittr_2.0.4     utf8_1.2.6        \n[45] broom_1.0.10       e1071_1.7-16       withr_3.0.2        scales_1.4.0      \n[49] backports_1.5.0    bit64_4.6.0-1      timechange_0.3.0   httr_1.4.7        \n[53] rmarkdown_2.30     bit_4.6.0          cellranger_1.1.0   hms_1.1.4         \n[57] evaluate_1.0.5     haven_2.5.5        rlang_1.1.6        Rcpp_1.1.0        \n[61] glue_1.8.0         renv_1.1.5         vroom_1.6.6        rstudioapi_0.17.1 \n[65] jsonlite_2.0.0     R6_2.6.1           fs_1.6.6          \n```\n\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}